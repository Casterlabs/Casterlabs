<!doctype html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />

		%sapper.base%

		<link rel="stylesheet" href="global.css" />
		<link rel="icon" type="image/png" href="logo-192.png" />

		<title>Casterlabs Caffeinated</title>

		<script>
			const { shell, remote } = require("electron");
			const { app } = remote;
			const currentWindow = remote.getCurrentWindow();

			const streamers = [
				{
					name: "Glitch3dPenguin",
					image: "/streamers/Glitch3dPenguin.png",
					link: "https://caff.tv/Glitch3dPenguin",
					platform: "Caffeine",
					platformIcon: "/platforms/caffeine.png"
				},
				{
					name: "DivideAConquer",
					image: "/streamers/DivideAConquer.png",
					link: "https://caff.tv/DivideAConquer",
					platform: "Caffeine",
					platformIcon: "/platforms/caffeine.png"
				},
				{
					name: "GeenoTV",
					image: "/streamers/GeenoTV.png",
					link: "https://caff.tv/GeenoTV",
					platform: "Caffeine",
					platformIcon: "/platforms/caffeine.png"
				},
				{
					name: "FallenWolf",
					image: "/streamers/FallenWolf.png",
					link: "https://caff.tv/FallenWolf",
					platform: "Caffeine",
					platformIcon: "/platforms/caffeine.png"
				},
				{
					name: "PigStand",
					image: "/streamers/PigStand.png",
					link: "https://caff.tv/PigStand",
					platform: "Caffeine",
					platformIcon: "/platforms/caffeine.png"
				}
			];

			const chosenStreamer = streamers[Math.floor(Math.random() * streamers.length)];

			window.addEventListener("load", () => {
				const closeButton = document.querySelector("#close-button a");

				closeButton.addEventListener("click", () => {
					app.exit();
				});
			});

			function openLink(link) {
				console.debug("Opening", link);
				shell.openExternal(link);
			}
		</script>

		<!-- Sapper creates a <script> tag containing `src/client.js`
	     and anything else it needs to hydrate the app and
	     initialise the router -->
		%sapper.scripts%

		<!-- Sapper generates a <style> tag containing critical CSS
	     for the current page. CSS for the rest of the app is
	     lazily loaded when it precaches secondary pages -->
		%sapper.styles%

		<!-- This contains the contents of the <svelte:head> component, if
	     the current page has one -->
		%sapper.head%
	</head>

	<body>
		<!-- The application will be rendered inside this element,
	     because `src/client.js` references it -->
		<div id="sapper">%sapper.html%</div>

		<div id="close-button">
			<a href="#">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x">
					<line x1="18" y1="6" x2="6" y2="18"></line>
					<line x1="6" y1="6" x2="18" y2="18"></line>
				</svg>
			</a>
		</div>
	</body>

</html>