<!doctype html>
<html class="bulma-dark-mode">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<title>Casterlabs Caffeinated</title>

		<!-- Scripts -->
		<script src="https://unpkg.com/feather-icons"></script>
		<script src="/init.js"></script>
		<script type="module" src="/js/interceptAnchors.js"></script>
		<script type="module" src="/js/keybinds.mjs"></script>
		<script type="module" src="/js/status-integration/discord.mjs"></script>

		<script>
			if (location.pathname != "/") {
				console.warn("[app.html]", "Reload detected, redirecting to /");
				location.href = "/";
			}
		</script>

		<!-- DEBUG SCRIPT -->
		<script type="module">
			import * as Caffeinated from "/js/caffeinated.mjs";
			import Router from "/js/router.mjs";
			import Auth from "/js/auth.mjs";
			import Koi from "/js/koi.mjs";
			import MusicIntegration from "/js/music-integration/music.mjs";
			import * as Modules from "/js/modules/modules.mjs";
			import OBS from "/js/obs.mjs";
			import * as UI from "/js/ui.mjs";
			import * as SystemVolumeMixer from "/js/system-volume-mixer.mjs";

			window.Caffeinated = Caffeinated;
			window.Router = Router;
			window.Auth = Auth;
			window.Koi = Koi;
			window.MusicIntegration = MusicIntegration;
			window.Modules = Modules;
			window.obs = OBS;
			window.UI = UI;
			window.SystemVolumeMixer = SystemVolumeMixer;

			window.debugClearCaches = function () {
				caches.keys()
					.then((names) => {
						for (const name of names) {
							caches.delete(name);
						}
					});
			}
		</script>

		<script type="module" src="/postInit.mjs"></script>

		<link rel="stylesheet" href="/css/bulma.min.css" />
		<link rel="stylesheet" href="/css/bulma-prefers-dark.min.css" />
		<link rel="stylesheet" href="/css/global.css" />
		<link rel="stylesheet" href="/css/titlebar.css" />
		<link rel="stylesheet" href="/css/scrollbar.css" />
		<link rel="stylesheet" href="/css/sidebar.css" />

		%svelte.head%
	</head>

	<body>
		<div class="body-container">
			<div id="svelte">%svelte.body%</div>
		</div>

		<div id="sandbox-frames" class="hidden"></div>
	</body>

</html>