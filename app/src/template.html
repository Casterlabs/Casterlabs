<!doctype html>
<html class="bulma-dark-mode">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<title>Casterlabs Caffeinated</title>

		%sapper.base%

		<!-- Scripts -->
		<script src="https://unpkg.com/feather-icons"></script>
		<script src="./init.js"></script>
		<script type="module" src="./js/interceptAnchors.js"></script>
		<script type="module" src="./js/keybinds.mjs"></script>
		<script type="module" src="./js/caffeinated.mjs"></script>
		<script type="module" src="./js/auth.mjs"></script>
		<script type="module" src="./js/koi.mjs"></script>
		<script type="module" src="./js/status-integration/discord.mjs"></script>
		<script type="module" src="./js/ui.mjs"></script>

		<!-- DEBUG SCRIPT -->
		<script type="module">
			import Auth from "./js/auth.mjs";
			import Koi from "./js/koi.mjs";

			window.Auth = Auth;
			window.Koi = Koi;
		</script>

		<!-- Sapper creates a <script> tag containing `src/client.js`
	     and anything else it needs to hydrate the app and
	     initialise the router -->
		%sapper.scripts%

		<!-- Sapper generates a <style> tag containing critical CSS
	     for the current page. CSS for the rest of the app is
	     lazily loaded when it precaches secondary pages -->
		%sapper.styles%

		<!-- This contains the contents of the <svelte:head> component, if
	     the current page has one -->
		%sapper.head%
	</head>

	<body>
		<!-- Svelte does not preserve element order in <head> -->
		<link rel="stylesheet" href="css/bulma.min.css" />
		<link rel="stylesheet" href="css/bulma-prefers-dark.min.css" />
		<link rel="stylesheet" href="css/global.css" />
		<link rel="stylesheet" href="css/titlebar.css" />
		<link rel="stylesheet" href="css/scrollbar.css" />
		<link rel="stylesheet" href="css/sidebar.css" />

		<div id="router" class="hidden">
			<a id="router-navigate-signin" href="/signin"></a>
			<a id="router-navigate-home" href="/home"></a>
		</div>

		<div class="body-container">
			<!-- Titlebar -->
			<section class="title-bar no-select">
				<div class=" title-bar-title">
					<img class="app-logo" src="logo/casterlabs.png" alt="Casterlabs" />
					<span class="current-page title is-6">
						Caffeinated
					</span>
				</div>
				<div class="title-actions">
					<span class="title is-6">
						<a class="minimize title-action">
							<i data-feather="minus"></i>
						</a><a class="maximize title-action">
							<i data-feather="maximize"></i>
						</a><a class="close title-action">
							<i data-feather="x"></i>
						</a>
					</span>
					<script>
						document
							.querySelector(".minimize")
							.addEventListener("click", () => {
								currentWindow.minimize();
							});

						document
							.querySelector(".maximize")
							.addEventListener("click", () => {
								currentWindow.isMaximized() ? currentWindow.unmaximize() : currentWindow.maximize();
							});

						document
							.querySelector(".close")
							.addEventListener("click", () => {
								app.exit();
							});
					</script>
				</div>
			</section>

			<section id="notifications" class="no-select">
			</section>

			<section id="body-content" class="no-select">
				<div id="side-bar">

				</div>

				<div class="sapper-container">
					<!-- The application will be rendered inside this element,
	 		 because `src/client.js` references it -->
					<div id="sapper">%sapper.html%</div>
				</div>
			</section>
		</div>
	</body>

</html>